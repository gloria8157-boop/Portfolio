<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>스도쿠 게임</title>
    <style>
        :root {
            --sky-blue-light: #f0f8ff; /* AliceBlue */
            --sky-blue-medium: #87ceeb; /* SkyBlue */
            --sky-blue-dark: #4682b4;  /* SteelBlue */
            --border-color: #b0c4de;   /* LightSteelBlue */
            --white-color: #ffffff;
            --dark-text: #333;
            --error-color: #ffdddd;
            --correct-color: #d4edda;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--sky-blue-light);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: var(--dark-text);
        }

        .game-container {
            background-color: var(--white-color);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: var(--sky-blue-dark);
            margin-top: 0;
        }

        #sudoku-board {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            grid-template-rows: repeat(9, 1fr);
            border: 3px solid var(--sky-blue-dark);
            border-radius: 8px;
            margin: 20px auto;
            width: 90vw;
            height: 90vw;
            max-width: 450px;
            max-height: 450px;
        }

        .sudoku-cell {
            width: 100%;
            height: 100%;
            text-align: center;
            font-size: 1.5rem;
            border: 1px solid var(--border-color);
            box-sizing: border-box;
            background-color: var(--white-color);
            color: var(--dark-text);
            transition: background-color 0.2s;
        }

        .sudoku-cell:focus {
            outline: none;
            background-color: var(--sky-blue-light);
        }

        /* 3x3 구역 구분을 위한 굵은 테두리 */
        .sudoku-cell:nth-child(3n) { border-right: 2px solid var(--sky-blue-dark); }
        .sudoku-cell:nth-child(9n) { border-right: none; }
        .sudoku-cell:nth-child(n+19):nth-child(-n+27),
        .sudoku-cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 2px solid var(--sky-blue-dark);
        }

        .pre-filled {
            background-color: #e9ecef;
            font-weight: bold;
            color: var(--sky-blue-dark);
        }
        
        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        button {
            padding: 10px 20px;
            font-size: 1rem;
            color: var(--white-color);
            background-color: var(--sky-blue-medium);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        button:hover {
            background-color: var(--sky-blue-dark);
        }

        button:active {
            transform: translateY(1px);
        }
        
        #message {
            margin-top: 15px;
            font-size: 1.1rem;
            color: var(--sky-blue-dark);
            min-height: 24px;
        }

        /* 반응형 스타일 */
        @media (max-width: 500px) {
            .sudoku-cell {
                font-size: 1.2rem;
            }
            .game-container {
                padding: 15px;
            }
            h1 {
                font-size: 1.8rem;
            }
        }

    </style>
</head>
<body>

    <div class="game-container">
        <h1>스도쿠 게임</h1>
        <div id="sudoku-board"></div>
        <div id="message">새로운 게임을 시작하세요!</div>
        <div class="controls">
            <button id="new-game-btn">새 게임</button>
            <button id="check-btn">정답 확인</button>
            <button id="solve-btn">정답 보기</button>
        </div>
    </div>

    <script>
        const boardElement = document.getElementById('sudoku-board');
        const messageElement = document.getElementById('message');
        const newGameBtn = document.getElementById('new-game-btn');
        const checkBtn = document.getElementById('check-btn');
        const solveBtn = document.getElementById('solve-btn');

        let currentPuzzle = [];
        let currentSolution = [];

        // 예시 스도쿠 퍼즐과 정답
        const puzzles = [
            {
                puzzle: [
                    [5, 3, 0, 0, 7, 0, 0, 0, 0],
                    [6, 0, 0, 1, 9, 5, 0, 0, 0],
                    [0, 9, 8, 0, 0, 0, 0, 6, 0],
                    [8, 0, 0, 0, 6, 0, 0, 0, 3],
                    [4, 0, 0, 8, 0, 3, 0, 0, 1],
                    [7, 0, 0, 0, 2, 0, 0, 0, 6],
                    [0, 6, 0, 0, 0, 0, 2, 8, 0],
                    [0, 0, 0, 4, 1, 9, 0, 0, 5],
                    [0, 0, 0, 0, 8, 0, 0, 7, 9]
                ],
                solution: [
                    [5, 3, 4, 6, 7, 8, 9, 1, 2],
                    [6, 7, 2, 1, 9, 5, 3, 4, 8],
                    [1, 9, 8, 3, 4, 2, 5, 6, 7],
                    [8, 5, 9, 7, 6, 1, 4, 2, 3],
                    [4, 2, 6, 8, 5, 3, 7, 9, 1],
                    [7, 1, 3, 9, 2, 4, 8, 5, 6],
                    [9, 6, 1, 5, 3, 7, 2, 8, 4],
                    [2, 8, 7, 4, 1, 9, 6, 3, 5],
                    [3, 4, 5, 2, 8, 6, 1, 7, 9]
                ]
            }
            // 여기에 더 많은 퍼즐을 추가할 수 있습니다.
        ];

        function createBoard(puzzle) {
            boardElement.innerHTML = ''; // 기존 보드 초기화
            for (let i = 0; i < 81; i++) {
                const cell = document.createElement('input');
                cell.type = 'number';
                cell.classList.add('sudoku-cell');
                cell.setAttribute('data-index', i);
                
                const row = Math.floor(i / 9);
                const col = i % 9;
                const value = puzzle[row][col];

                if (value !== 0) {
                    cell.value = value;
                    cell.readOnly = true;
                    cell.classList.add('pre-filled');
                } else {
                     // 1~9 사이의 숫자만 입력 가능하도록 제한
                    cell.addEventListener('input', () => {
                        if (cell.value.length > 1) {
                            cell.value = cell.value.slice(0, 1);
                        }
                        if (parseInt(cell.value) < 1 || parseInt(cell.value) > 9) {
                            cell.value = '';
                        }
                    });
                }
                boardElement.appendChild(cell);
            }
        }

        function newGame() {
            // 지금은 퍼즐이 하나뿐이므로 첫 번째 퍼즐을 사용합니다.
            const puzzleData = puzzles[0]; 
            currentPuzzle = puzzleData.puzzle;
            currentSolution = puzzleData.solution;
            createBoard(currentPuzzle);
            messageElement.textContent = "새로운 게임이 시작되었습니다!";
            clearHighlights();
        }

        function checkSolution() {
            const cells = document.querySelectorAll('.sudoku-cell');
            let isCorrect = true;
            let isComplete = true;

            cells.forEach((cell, index) => {
                const row = Math.floor(index / 9);
                const col = index % 9;
                const solutionValue = currentSolution[row][col];
                
                cell.style.backgroundColor = ''; // 이전 하이라이트 초기화

                if (cell.value === '') {
                    isComplete = false;
                    return; // 비어있는 칸은 검사하지 않음
                }

                if (parseInt(cell.value) !== solutionValue) {
                    isCorrect = false;
                    if(!cell.classList.contains('pre-filled')) {
                        cell.style.backgroundColor = 'var(--error-color)';
                    }
                }
            });

            if (!isComplete) {
                messageElement.textContent = "아직 빈 칸이 있습니다.";
            } else if (isCorrect) {
                messageElement.textContent = "축하합니다! 스도쿠를 완성했습니다!";
                highlightAllCorrect();
            } else {
                messageElement.textContent = "틀린 부분이 있습니다. 다시 확인해 보세요.";
            }
        }
        
        function solveGame() {
            createBoard(currentSolution);
            messageElement.textContent = "정답이 표시되었습니다.";
        }

        function clearHighlights() {
            document.querySelectorAll('.sudoku-cell').forEach(cell => {
                cell.style.backgroundColor = '';
            });
        }
        
        function highlightAllCorrect() {
             document.querySelectorAll('.sudoku-cell').forEach(cell => {
                if(!cell.classList.contains('pre-filled')) {
                    cell.style.backgroundColor = 'var(--correct-color)';
                }
            });
        }

        // 이벤트 리스너 연결
        newGameBtn.addEventListener('click', newGame);
        checkBtn.addEventListener('click', checkSolution);
        solveBtn.addEventListener('click', solveGame);

        // 페이지 로드 시 새 게임 시작
        window.addEventListener('load', newGame);
    </script>
</body>
</html>
